---
title: OS-02
abbrlink: e23d2a09
date: 2024-02-24 17:16:01
tags: 知识
---

进程控制块：操作系统创建和管理，包含了进程的充分信息，可以方便于中断，因为保存了进程的寄存器以及上下文信息等

进程轨迹：进程执行的指令序列
进程轨迹的的交替方式可以描述处理器的行为
分派器(调度器)控制进程的切换

进程创建，可以由进程创建进程，一个进程的显示请求创建了另一个进程的时候，称为进程派生

两状态模型：运行态和非运行态，有一个进程队列

五状态模型：非运行态分为了阻塞态和就绪态，还有未加载到内存的新建态以及可以释放的退出态
具体看书上的图
阻塞——就绪：当等待的事件发生了以后，阻塞态的进程就成为了就绪态
运行——就绪：超时
运行——阻塞：等待事件

有阻塞队列和就绪队列，当一个事件发生时，扫描等待这个事件的阻塞队列，把阻塞进程放到就绪队列里

产生了新的问题：
由于处理器速度远大于IO操作的速度，所以可能会存在所有进程都处于IO的情况，内存已满进不来新的进程，解决方法是将阻塞的进程转移到磁盘的**挂起队列(suspend queue)**中，这个行为称之为**交换**，交换也是IO操作，但由于磁盘IO速度是最快的IO，所以往往可以提高效率

所以阻塞态多了一个交互的状态，成为**挂起态**，当事件发生的时候挂起态进程可以回到内存中运行
所以又多了两个状态：阻塞/挂起态和就绪/挂起态
成了七状态模型

资源：文件系统，IO，处理器，内存外存等
操作系统可以看做是管理资源的实体，所以需要知道进程和资源的当前状态，所以OS维护4类信息表：内存，I/O，文件和进程

进程映像包括：数据，程序，栈，进程控制块(属性集)，进程映像可以一部分在内存，一部分在外存，但是执行的时候要可以放到内存中，进程映像也是不连续分页的，操作系统的进程表要知道进程映像每页的位置
进程控制块包含的信息：

- 进程标识信息(包含标识符等)
- 进程状态信息(处理器状态信息)
- 进程控制信息

处理器设置有一个称为程序状态字(PSW)的寄存器，如Intel x86的EFLAGS寄存器，保存程序的大量状态信息

有个东西叫进程控制块，包含操作系统需要的一个进程的所有信息，为了安全由一个处理程序例程来作为修改进程控制块的仲裁程序

处理器有两种执行模式：
与操作系统相关联的内核模式
与用户相关联的用户模式

内核(操作系统的一部分，管理者重要的系统功能，具体看书)模式的是特权模式，可以访问信息，用户模式权限受限
处理器在执行时候区分两种模式的方法是通过PSW的前几位来判断权限

操作系统进程创建：

1. 分配一个唯一的进程标识符
2. 为进程分配空间
3. 初始化进程控制块：除非继承父进程或者显式请求否则初始时不用有任何资源，优先级默认最低等
4. 设置链接：进调度队列
5. 创建其他数据结构：如记账文件等
